(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function E(e){const r=new Date().getTime()-e.getTime(),s=1e3*60*60*24;return Math.round(r/s)}function x(e){const t=Math.floor(e/60),r=e%60;return{hours:t,minutes:r}}const S="k_8qpy5jba",L="https://imdb-api.com/en/API",M="https://www.imdb.com/title";let d;window.addEventListener("load",async()=>{const e=document.querySelector(".movies"),t=document.querySelector("#movieCardTemplate");d=new Proxy({value:[]},{set(n,o,c){return n.value=c,r(),!0}}),w();function r(){var n;e&&(e.innerHTML="",d.value.length==0?(n=document.querySelector(".no-results-text"))==null||n.classList.add("no-results-text-visible"):d.value.forEach(o=>{e.insertAdjacentElement("beforeend",s(o))}))}function s(n){var u,m;const o=(u=t.content.firstElementChild)==null?void 0:u.cloneNode(!0),c=document.createElement("img");c.src=n.posterUrl,c.alt=n.title,c.classList.add("movie-thumbnail"),(m=o.querySelector("header"))==null||m.insertAdjacentElement("afterbegin",c);const g=o.querySelector(".movie-title");g.insertAdjacentText("afterbegin",n.title),g.href=n.moreInfoPageUrl;const i=o.querySelector(".movie-runtime");if(n.runtime){const{hours:a,minutes:l}=x(Number(n.runtime.split(" ")[0]));i==null||i.insertAdjacentText("afterbegin",n.runtime),i.dateTime=`PT${a}H${l}M`}else i.remove();n.genres.forEach(a=>{var l;(l=o.querySelector(".genres-list"))==null||l.insertAdjacentHTML("beforeend",`
                        <li class="movie-genre">
                            ${a}
                        </li>
                    `)});const f=o.querySelector(".watch-button");return f.href=n.moreInfoPageUrl,o}});async function w(e){const t=document.querySelector(".loading-indicator");if(e)t==null||t.classList.add("loading-indicator-visible"),d.value=await A(e),t==null||t.classList.remove("loading-indicator-visible");else{const r=localStorage.getItem("trending-movies"),s=localStorage.getItem("cache-date");if(r&&s&&E(new Date(s))<=4)d.value=JSON.parse(r);else{t==null||t.classList.add("loading-indicator-visible");const n=await T();localStorage.setItem("trending-movies",JSON.stringify(n)),localStorage.setItem("cache-date",new Date().toString()),t==null||t.classList.remove("loading-indicator-visible"),d.value=n}}}async function T(){const e=`${L}/AdvancedSearch/${S}?groups=top_100&count=12`,t=await fetch(e);if(t.ok){const r=await t.json();return q(r.results)}else return[]}async function A(e){const t=await fetch(I(e));if(!t.ok)throw new Error;return q((await t.json()).results)}function q(e){return e.map(r=>({title:r.title,runtime:r.runtimeStr,genres:r.genres.split(", "),posterUrl:r.image,moreInfoPageUrl:M+"/"+r.id}))}function I(e){let t=`${L}/AdvancedSearch/${S}?count=8&title=${e.searchQuery}`;if(e.recent){const r=new Date().getFullYear();t=t+`&release_date=${r}`}if(e.goodRating&&(t=t+"&user_rating=8.0,10"),e.genres.length>0){const r=e.genres.reduce((s,n)=>s+","+n);t=t+`&genres=${r}`}return t}window.addEventListener("load",()=>{var f,u,m,a;const e=document.querySelector(".sidebar"),t=document.querySelector(".error-text"),r=document.getElementById("recentCheckbox"),s=document.getElementById("goodRatingCheckbox"),n=document.querySelectorAll('.genre-filters-spoiler input[type="checkbox"]'),o=document.querySelector(".search-query-field");(f=document.querySelector(".expanded-content"))==null||f.addEventListener("submit",i),(u=document.querySelector(".expand-button"))==null||u.addEventListener("click",c),(m=document.querySelector(".open-sidebar-button"))==null||m.addEventListener("click",c),(a=document.querySelector(".minimize-button"))==null||a.addEventListener("click",g);function c(){e==null||e.classList.add("sidebar-expanded"),e==null||e.classList.remove("sidebar-static")}function g(){e==null||e.classList.remove("sidebar-expanded"),setTimeout(()=>{e==null||e.classList.add("sidebar-static")},400)}function i(l){var y;l.preventDefault();const h=o.value.trim();if(h.length<4){P();return}t==null||t.classList.remove("error-text-visible");const v={searchQuery:h,genres:[],recent:r.checked,goodRating:s.checked};n.forEach(p=>{p.checked&&v.genres.push(p.value)}),e==null||e.classList.remove("sidebar-expanded"),(y=document.querySelector(".no-results-text"))==null||y.classList.remove("no-results-text-visible"),w(v)}});let b=0;function P(){const e=document.querySelector(".error-text");clearTimeout(b),e==null||e.classList.add("error-text-visible"),b=window.setTimeout(()=>{e==null||e.classList.remove("error-text-visible")},3e3)}
