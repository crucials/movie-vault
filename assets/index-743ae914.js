(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();function q(e){const o=new Date().getTime()-e.getTime(),s=1e3*60*60*24;return Math.round(o/s)}function E(e){const n=Math.floor(e/60),o=e%60;return{hours:n,minutes:o}}const x="https://www.imdb.com/title";let u;const b="/movie-vault/";window.addEventListener("load",async()=>{const e=document.querySelector(".movies"),n=document.querySelector("#movieCardTemplate");u=new Proxy({value:[]},{set(t,r,i){return t.value=i,o(),!0}}),S();function o(){var t;e&&(e.innerHTML="",u.value.length==0?(t=document.querySelector(".no-results-text"))==null||t.classList.add("no-results-text-visible"):u.value.forEach(r=>{e.insertAdjacentElement("beforeend",s(r))}))}function s(t){var d,m;const r=(d=n.content.firstElementChild)==null?void 0:d.cloneNode(!0),i=document.createElement("img");i.src=t.posterUrl,i.alt=t.title,i.classList.add("movie-thumbnail"),(m=r.querySelector("header"))==null||m.insertAdjacentElement("afterbegin",i);const f=r.querySelector(".movie-title");f.insertAdjacentText("afterbegin",t.title),f.href=t.moreInfoPageUrl;const c=r.querySelector(".movie-runtime");if(t.runtime){const{hours:a,minutes:l}=E(Number(t.runtime.split(" ")[0]));c==null||c.insertAdjacentText("afterbegin",t.runtime),c.dateTime=`PT${a}H${l}M`}else c.remove();t.genres.forEach(a=>{var l;(l=r.querySelector(".genres-list"))==null||l.insertAdjacentHTML("beforeend",`
                        <li class="movie-genre">
                            ${a}
                        </li>
                    `)});const g=r.querySelector(".watch-button");return g.href=t.moreInfoPageUrl,r}});async function S(e){const n=document.querySelector(".loading-indicator");if(e)n==null||n.classList.add("loading-indicator-visible"),u.value=await T(e),n==null||n.classList.remove("loading-indicator-visible");else{const o=localStorage.getItem("trending-movies"),s=localStorage.getItem("cache-date");if(o&&s&&q(new Date(s))<=4)u.value=JSON.parse(o);else{n==null||n.classList.add("loading-indicator-visible");const t=await M();localStorage.setItem("trending-movies",JSON.stringify(t)),localStorage.setItem("cache-date",new Date().toString()),n==null||n.classList.remove("loading-indicator-visible"),u.value=t}}}async function M(){const e=await fetch(b+"data/trending-movies.json");if(e.ok){const n=await e.json();return w(n)}else return[]}async function T(e){const n=await fetch(b+"data/movies.json");if(!n.ok)throw new Error;return w(await n.json()).filter(s=>{const t=e.searchQuery.trim();return!(t.length>0&&!s.title.toUpperCase().includes(t.toUpperCase())||e.recent&&s.year!==new Date().getFullYear()||e.goodRating&&s.rating<8||e.genres.length>0&&!e.genres.some(r=>s.genres.includes(r)))}).slice(0,8)}function w(e){return e.map(o=>({title:o.title,runtime:o.runtimeStr,genres:o.genres.split(", "),posterUrl:o.image,moreInfoPageUrl:x+"/"+o.id,year:+o.year,rating:+o.rating}))}window.addEventListener("load",()=>{var g,d,m,a;const e=document.querySelector(".sidebar"),n=document.querySelector(".error-text"),o=document.getElementById("recentCheckbox"),s=document.getElementById("goodRatingCheckbox"),t=document.querySelectorAll('.genre-filters-spoiler input[type="checkbox"]'),r=document.querySelector(".search-query-field");(g=document.querySelector(".expanded-content"))==null||g.addEventListener("submit",c),(d=document.querySelector(".expand-button"))==null||d.addEventListener("click",i),(m=document.querySelector(".open-sidebar-button"))==null||m.addEventListener("click",i),(a=document.querySelector(".minimize-button"))==null||a.addEventListener("click",f);function i(){e==null||e.classList.add("sidebar-expanded"),e==null||e.classList.remove("sidebar-static")}function f(){e==null||e.classList.remove("sidebar-expanded"),setTimeout(()=>{e==null||e.classList.add("sidebar-static")},400)}function c(l){var v;l.preventDefault();const h=r.value.trim();if(h.length<4){C();return}n==null||n.classList.remove("error-text-visible");const y={searchQuery:h,genres:[],recent:o.checked,goodRating:s.checked};t.forEach(p=>{p.checked&&y.genres.push(p.value)}),e==null||e.classList.remove("sidebar-expanded"),(v=document.querySelector(".no-results-text"))==null||v.classList.remove("no-results-text-visible"),S(y)}});let L=0;function C(){const e=document.querySelector(".error-text");clearTimeout(L),e==null||e.classList.add("error-text-visible"),L=window.setTimeout(()=>{e==null||e.classList.remove("error-text-visible")},3e3)}
